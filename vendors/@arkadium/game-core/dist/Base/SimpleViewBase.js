"use strict";
/*!@license
 * Copyright (c) Arkadium Inc - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Denis Gusarov <denis.gusarov@arkadium.com>
 */var __extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var _ViewBase_1=require("./_ViewBase"),SpriteEvents_1=require("./SpriteEvents"),SpriteList_1=require("./SpriteList"),IViewConfiguration_1=require("./IViewConfiguration"),Linq_1=require("../Linq/Linq"),SimpleViewBase=function(i){function t(t){var e=i.call(this,t)||this;return e.name=t,e.$sprites=new SpriteList_1.SpriteList,e.$spritesEvents=new SpriteEvents_1.SpriteEvents,e}return __extends(t,i),t.prototype.initialize=function(t,e){return void 0===e&&(e=null),this.parentContainer=e||t.display,this.parentContainer.addChild(this.display),this.$sprites.initialize(null,this.display,this),this.$spritesEvents.initialize(this.config.events,null,this.$sprites,this,this.logger),this.config.onTap&&this.$spritesEvents.addEvent(this.display,this.config.onTap,this,this.logger,{eventType:IViewConfiguration_1.EventsTypeEnum.CLICK_OR_TAP,event:this.config.onTap,targetType:IViewConfiguration_1.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerDown&&this.$spritesEvents.addEvent(this.display,this.config.onPointerDown,this,this.logger,{eventType:IViewConfiguration_1.EventsTypeEnum.POINTERDOWN,event:this.config.onPointerDown,targetType:IViewConfiguration_1.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerUp&&this.$spritesEvents.addEvent(this.display,this.config.onPointerUp,this,this.logger,{eventType:IViewConfiguration_1.EventsTypeEnum.POINTERUP,event:this.config.onPointerUp,targetType:IViewConfiguration_1.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerUpOutside&&this.$spritesEvents.addEvent(this.display,this.config.onPointerUpOutside,this,this.logger,{eventType:IViewConfiguration_1.EventsTypeEnum.POINTERUPOUTSIDE,event:this.config.onPointerUpOutside,targetType:IViewConfiguration_1.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerOut&&this.$spritesEvents.addEvent(this.display,this.config.onPointerOut,this,this.logger,{eventType:IViewConfiguration_1.EventsTypeEnum.POINTEROUT,event:this.config.onPointerOut,targetType:IViewConfiguration_1.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerOver&&this.$spritesEvents.addEvent(this.display,this.config.onPointerOver,this,this.logger,{eventType:IViewConfiguration_1.EventsTypeEnum.POINTEROVER,event:this.config.onPointerOver,targetType:IViewConfiguration_1.EventsTargetTypeEnum.SPRITE,targetName:this.name}),this.config.onPointerMove&&this.$spritesEvents.addEvent(this.display,this.config.onPointerMove,this,this.logger,{eventType:IViewConfiguration_1.EventsTypeEnum.POINTERMOVE,event:this.config.onPointerMove,targetType:IViewConfiguration_1.EventsTargetTypeEnum.SPRITE,targetName:this.name}),i.prototype.initialize.call(this,t,e)},t.prototype._applyChildrenSorted=function(){var i=this;if(this.__childrenSorted){var n=new PIXI.Container,t=function(){for(var t=i.display.children.indexOf(n);t<i.display.children.length;t++){var e=i.display.children[t];i.display.swapChildren(n,e)}};this.display.addChild(n);for(var e=0;e<this.__childrenSorted.length;e++){var s=this.__childrenSorted[e];this.display.swapChildren(n,s),t()}this.display.removeChild(n),this.__childrenSorted=null}},t.prototype.sortCurrentChildren=function(t){for(var e=this.display.children,i=null,n=new Linq_1.List,s=0;s<e.length;s++)(i=e[s]).zOrder=0,t(i,i.__view)&&n.Add(i);this.__childrenSorted=n.OrderBy(function(t){return t.zOrder}).ToArray()},t.prototype.update=function(t){return this._applyChildrenSorted(),i.prototype.update.call(this,t)},t.prototype.dispose=function(){this.isReady&&(this.parentContainer.removeChild(this.display),this.display.destroy({children:!0}),i.prototype.dispose.call(this),this.$spritesEvents.dispose())},t}(_ViewBase_1._ViewBase),SimpleLoadingViewBase=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.toggleVisible=function(t){(this.visible=t)?this.onShow():this.onHide()},e}(exports.SimpleViewBase=SimpleViewBase);exports.SimpleLoadingViewBase=SimpleLoadingViewBase;