"use strict";
/*!@license
 * Copyright (c) Arkadium Inc - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Denis Gusarov <denis.gusarov@arkadium.com>
 */Object.defineProperty(exports,"__esModule",{value:!0});var Linq_1=require("../../Linq/Linq"),underscore_1=require("../../Utils/underscore"),expandFunc_1=require("../expandFunc"),KeyboardItem=function(e,t,n){this.name=e,this.event=t,this.key=n};exports.KeyboardItem=KeyboardItem;var KeyboardItemsList=function(){function e(e,t){this._keyboardManager=e,this._logger=t,this.items=new Linq_1.List}return e.prototype.get=function(e){return this[e]},e.prototype.initialize=function(e,a){var i=this;underscore_1._u.each(e,function(e,o){if("down"==o||"pressed"==o||"released"==o){var n=expandFunc_1.expandFunc(e,i);i._addKeyboardItem(function(e,t){void 0===t&&(t=!0),t&&i._logger.log(a.locator,"Keyboard",o,e),n(e)},o)}else underscore_1._u.each(e,function(e,n){if("down"==n||"pressed"==n||"released"==n){var r=expandFunc_1.expandFunc(e,i);i._addKeyboardItem(function(e,t){void 0===t&&(t=!0),e==o&&(t&&i._logger.log(a.locator,"Keyboard",n,e),r(e))},n,o)}},i)},this)},e.prototype._addKeyboardItem=function(e,t,n){void 0===n&&(n=null);var r=null;"down"==t?(r=new KeyboardItem(t,e,n),this._keyboardManager.on(t,r.event)):"pressed"==t?(r=new KeyboardItem(t,e,n),this._keyboardManager.on(t,r.event)):"released"==t&&(r=new KeyboardItem(t,e,n),this._keyboardManager.on(t,r.event)),r&&(this.items.Add(r),this[t]=r)},e.prototype.dispose=function(){var t=this;this.items.ForEach(function(e){t._keyboardManager.off(e.name,e.event)})},e}();exports.KeyboardItemsList=KeyboardItemsList;