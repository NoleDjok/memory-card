"use strict";var __extends=this&&this.__extends||function(){var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};return function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var Particle_1=require("./Particle"),ParticleUtils_1=require("./ParticleUtils"),AnimatedParticle=function(r){function t(t){var e=r.call(this,t)||this;return e.textures=null,e.duration=0,e.framerate=0,e.elapsed=0,e.loop=!1,e}return __extends(t,r),t.prototype.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},t.prototype.applyArt=function(t){this.textures=t.textures,this.framerate=t.framerate,this.duration=t.duration,this.loop=t.loop},t.prototype.update=function(t){var e=this.Particle_update(t);if(0<=e){this.elapsed+=t,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var r=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[r]||PIXI.Texture.EMPTY}return e},t.prototype.destroy=function(){this.Particle_destroy(),this.textures=null},t.parseArt=function(t){for(var e,r,i,a,o,s=[],n=0;n<t.length;++n){e=t[n],s[n]=r={},r.textures=o=[],i=e.textures;for(var u=0;u<i.length;++u)if("string"==typeof(a=i[u]))o.push(ParticleUtils_1.GetTextureFromString(a));else if(a instanceof PIXI.Texture)o.push(a);else{var l=a.count||1;for(a="string"==typeof a.texture?ParticleUtils_1.GetTextureFromString(a.texture):a.texture;0<l;--l)o.push(a)}"matchLife"==e.framerate?(r.framerate=-1,r.duration=0,r.loop=!1):(r.loop=!!e.loop,r.framerate=0<e.framerate?e.framerate:60,r.duration=o.length/r.framerate)}return s},t}(Particle_1.Particle);exports.AnimatedParticle=AnimatedParticle;