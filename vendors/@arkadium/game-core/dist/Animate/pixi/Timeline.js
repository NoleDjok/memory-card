"use strict";
/*!@license
 * Copyright (c) Arkadium Inc - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Denis Gusarov <denis.gusarov@arkadium.com>
 */var __extends=this&&this.__extends||function(){var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)};return function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var Tween_1=require("./Tween");function addTween(e,r,t,n){this.extendLastFrame(r-1);var s,a={};for(s in e)if(this._currentProps.hasOwnProperty(s))a[s]=this._currentProps[s];else for(var i=a[s]=this.getPropFromShorthand(s),o=this.length-1;0<=o;--o)this[o].startProps[s]=i,this[o].endProps[s]=i;var u=new Tween_1.Tween(a,e,r,t,n);this.push(u),this._currentProps=__assign(__assign({},this._currentProps),u.endProps)}function addKeyframe(e,r){this.extendLastFrame(r-1);var t=__assign(__assign({},this._currentProps),e),n=new Tween_1.Tween(t,null,r,0);return this.push(n),this._currentProps=__assign(__assign({},this._currentProps),n.endProps),n}function extendLastFrame(e){if(this.length){var r=this[this.length-1];r.endFrame<e&&(r.isTweenlessFrame?r.endFrame=e:this.addKeyframe(this._currentProps,r.endFrame+1,e-r.endFrame+1))}}function getPropFromShorthand(e){var r=this.target;switch(e){case"x":return r.position.x;case"y":return r.position.y;case"sx":return r.scale.x;case"sy":return r.scale.y;case"kx":return r.skew.x;case"ky":return r.skew.y;case"r":return r.rotation;case"a":return r.alpha;case"v":return r.visible;case"m":return r.mask}return null}var ChildTimeline=function(t){function e(e){var r=t.call(this)||this;return r.targetIndex=e,r}return __extends(e,t),e}(Array);exports.ChildTimeline=ChildTimeline;var Timeline=function(t){function e(e){var r=t.call(this)||this;return r._currentProps={},r.targetIndex=e,r.addTween=addTween,r.addKeyframe=addKeyframe,r.extendLastFrame=extendLastFrame,r.getPropFromShorthand=getPropFromShorthand,r}return __extends(e,t),e}(Array);exports.Timeline=Timeline;