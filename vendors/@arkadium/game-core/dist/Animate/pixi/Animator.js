"use strict";
/*!@license
 * Copyright (c) Arkadium Inc - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 * Written by Denis Gusarov <denis.gusarov@arkadium.com>
 */Object.defineProperty(exports,"__esModule",{value:!0});var AnimatorTimeline_1=require("./AnimatorTimeline"),timelines=[],Animator=function(){function e(){}return Object.defineProperty(e,"_timelines",{get:function(){return timelines},enumerable:!0,configurable:!0}),Object.defineProperty(e,"STOP_LABEL",{get:function(){return"_stop"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LOOP_LABEL",{get:function(){return"_loop"},enumerable:!0,configurable:!0}),e.play=function(e,t,r){var i,n,o=!1,a="function"==typeof t;if(void 0===t||a)i=0,n=e.totalFrames-1,a&&(r=t);else{if(i=e.labelsMap[t],void 0===(n=e.labelsMap[t+this.STOP_LABEL])&&(n=e.labelsMap[t+this.LOOP_LABEL],o=!0),void 0===i)throw new Error("No start label matching '"+t+"'");if(void 0===n)throw new Error("No end label matching '"+t+"'")}return this.fromTo(e,i,n,o,r)},e.to=function(e,t,r){return this.fromTo(e,e.currentFrame,t,!1,r)},e.fromTo=function(e,t,r,i,n){if("string"==typeof t){var o=t;if(void 0===(t=e.labelsMap[o]))throw new Error("No start label matching '"+o+"'")}if("string"==typeof r){var a=r;if(void 0===(r=e.labelsMap[a]))throw new Error("No end label matching '"+a+"'")}if(t<0)throw new Error("Start frame is out of bounds");if(r>=e.totalFrames)throw new Error("End frame is out of bounds");if(r<=t)throw new Error("End frame is before start frame");this.stop(e),i=!!i;var s=AnimatorTimeline_1.AnimatorTimeline.create(e,t,r,i,n);return this._timelines.push(s),e.currentFrame!==t?e.gotoAndPlay(t):e.play(),s},e.stop=function(e){for(var t=0,r=this._timelines.length;t<r;t++){var i=this._timelines[t];if(i.instance===e){this._internalStop(i);break}}},e.stopAll=function(){for(var e=this._timelines.length-1;0<=e;e--)this._internalStop(this._timelines[e])},e._internalStop=function(e){this._timelines.splice(this._timelines.indexOf(e),1),e.instance.stop(),e.destroy()},e}();exports.Animator=Animator;