"use strict";var __extends=this&&this.__extends||function(){var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)};return function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}();Object.defineProperty(exports,"__esModule",{value:!0});var PixiArmatureDisplay_1=require("./PixiArmatureDisplay"),PixiTextureAtlasData_1=require("./PixiTextureAtlasData"),BaseFactory_1=require("../factory/BaseFactory"),DragonBones_1=require("../core/DragonBones"),BaseObject_1=require("../core/BaseObject"),Armature_1=require("../armature/Armature"),PixiSlot_1=require("./PixiSlot"),PixiFactory=function(a){function o(e,r){void 0===e&&(e=null),void 0===r&&(r=!0);var t=a.call(this,e)||this;if(null===o._dragonBonesInstance){var n=new PixiArmatureDisplay_1.PixiArmatureDisplay(PIXI.Texture.EMPTY);o._dragonBonesInstance=new DragonBones_1.DragonBones(n)}return t._dragonBones=o._dragonBonesInstance,t}return __extends(o,a),o.clockHandler=function(e){null!==o._dragonBonesInstance&&o._dragonBonesInstance.advanceTime(e)},o.advanceTime=function(e){this._dragonBonesInstance.advanceTime(e)},Object.defineProperty(o,"factory",{get:function(){return null===o._factory&&(o._factory=new o(null,o.useSharedTicker)),o._factory},enumerable:!0,configurable:!0}),o.newInstance=function(e){return void 0===e&&(e=!0),null===o._factory&&(o._factory=new o(null,e)),o._factory},o.prototype._buildTextureAtlasData=function(e,r){return e?e.renderTexture=r:e=BaseObject_1.BaseObject.borrowObject(PixiTextureAtlasData_1.PixiTextureAtlasData),e},o.prototype._buildArmature=function(e){var r=BaseObject_1.BaseObject.borrowObject(Armature_1.Armature),t=new PixiArmatureDisplay_1.PixiArmatureDisplay(PIXI.Texture.EMPTY);return r.init(e.armature,t,t,this._dragonBones),r},o.prototype._buildSlot=function(e,r,t){var n=BaseObject_1.BaseObject.borrowObject(PixiSlot_1.PixiSlot);return n.init(r,t,new PIXI.Sprite(PIXI.Texture.EMPTY),new PIXI.SimpleMesh(null,null,null,null,PIXI.DRAW_MODES.TRIANGLES)),n},o.prototype.buildArmatureDisplay=function(e,r,t,n){void 0===r&&(r=""),void 0===t&&(t=""),void 0===n&&(n="");var a=this.buildArmature(e,r||"",t||"",n||"");return null!==a?(this._dragonBones.clock.add(a),a.display):null},o.prototype.getTextureDisplay=function(e,r){void 0===r&&(r=null);var t=this._getTextureData(null!==r?r:"",e);return null!==t&&null!==t.renderTexture?new PIXI.Sprite(t.renderTexture):null},Object.defineProperty(o.prototype,"soundEventManager",{get:function(){return this._dragonBones.eventManager},enumerable:!0,configurable:!0}),o._dragonBonesInstance=null,o._factory=null,o.useSharedTicker=!0,o}(BaseFactory_1.BaseFactory);exports.PixiFactory=PixiFactory;