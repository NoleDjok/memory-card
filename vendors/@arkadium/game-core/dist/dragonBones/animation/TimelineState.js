"use strict";var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var BaseTimelineState_1=require("./BaseTimelineState"),Transform_1=require("../geom/Transform"),EventObject_1=require("../event/EventObject"),BaseObject_1=require("../core/BaseObject"),ActionTimelineState=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.ActionTimelineState]"},e.prototype._onCrossFrame=function(t){var e=this._armature.eventDispatcher;if(this._animationState.actionEnabled)for(var i=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+t],r=this._frameArray[i+1],a=this._animationData.parent.actions,n=0;n<r;++n){var s=a[this._frameArray[i+2+n]];if(0===s.type){(o=BaseObject_1.BaseObject.borrowObject(EventObject_1.EventObject)).time=this._frameArray[i]/this._frameRate,o.animationState=this._animationState,EventObject_1.EventObject.actionDataToInstance(s,o,this._armature),this._armature._bufferAction(o,!0)}else{var o,l=10===s.type?EventObject_1.EventObject.FRAME_EVENT:EventObject_1.EventObject.SOUND_EVENT;if(11===s.type||e.hasDBEventListener(l))(o=BaseObject_1.BaseObject.borrowObject(EventObject_1.EventObject)).time=this._frameArray[i]/this._frameRate,o.animationState=this._animationState,EventObject_1.EventObject.actionDataToInstance(s,o,this._armature),this._armature._dragonBones.bufferEvent(o)}}},e.prototype._onArriveAtFrame=function(){},e.prototype._onUpdateFrame=function(){},e.prototype.update=function(t){var e=this.playState,i=this.currentPlayTimes,r=this.currentTime;if(this._setCurrentTime(t)){var a=null===this._animationState._parent&&this._animationState.actionEnabled,n=this._armature.eventDispatcher;if(e<0){if(this.playState===e)return;if(this._animationState.displayControl&&this._animationState.resetToPose&&this._armature._sortZOrder(null,0),i=this.currentPlayTimes,a&&n.hasDBEventListener(EventObject_1.EventObject.START)){var s=BaseObject_1.BaseObject.borrowObject(EventObject_1.EventObject);s.type=EventObject_1.EventObject.START,s.armature=this._armature,s.animationState=this._animationState,this._armature._dragonBones.bufferEvent(s)}}var o=this._animationState.timeScale<0,l=null,h=null;if(a&&this.currentPlayTimes!==i&&(n.hasDBEventListener(EventObject_1.EventObject.LOOP_COMPLETE)&&((l=BaseObject_1.BaseObject.borrowObject(EventObject_1.EventObject)).type=EventObject_1.EventObject.LOOP_COMPLETE,l.armature=this._armature,l.animationState=this._animationState),0<this.playState&&n.hasDBEventListener(EventObject_1.EventObject.COMPLETE)&&((h=BaseObject_1.BaseObject.borrowObject(EventObject_1.EventObject)).type=EventObject_1.EventObject.COMPLETE,h.armature=this._armature,h.animationState=this._animationState)),1<this._frameCount){var _=this._timelineData,f=Math.floor(this.currentTime*this._frameRate),u=this._frameIndices[_.frameIndicesOffset+f];if(this._frameIndex!==u){var m=this._frameIndex;if(this._frameIndex=u,null!==this._timelineArray)if(this._frameOffset=this._animationData.frameOffset+this._timelineArray[_.offset+5+this._frameIndex],o){if(m<0){var p=Math.floor(r*this._frameRate);m=this._frameIndices[_.frameIndicesOffset+p],this.currentPlayTimes===i&&m===u&&(m=-1)}for(;0<=m;){var c=this._animationData.frameOffset+this._timelineArray[_.offset+5+m],d=this._frameArray[c]/this._frameRate;if(this._position<=d&&d<=this._position+this._duration&&this._onCrossFrame(m),null!==l&&0===m&&(this._armature._dragonBones.bufferEvent(l),l=null),0<m?m--:m=this._frameCount-1,m===u)break}}else{if(m<0){p=Math.floor(r*this._frameRate);m=this._frameIndices[_.frameIndicesOffset+p];c=this._animationData.frameOffset+this._timelineArray[_.offset+5+m],d=this._frameArray[c]/this._frameRate;this.currentPlayTimes===i&&(r<=d?0<m?m--:m=this._frameCount-1:m===u&&(m=-1))}for(;0<=m;){m<this._frameCount-1?m++:m=0;c=this._animationData.frameOffset+this._timelineArray[_.offset+5+m],d=this._frameArray[c]/this._frameRate;if(this._position<=d&&d<=this._position+this._duration&&this._onCrossFrame(m),null!==l&&0===m&&(this._armature._dragonBones.bufferEvent(l),l=null),m===u)break}}}}else if(this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData)){this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5];d=this._frameArray[this._frameOffset]/this._frameRate;this.currentPlayTimes===i?r<=d&&this._onCrossFrame(this._frameIndex):this._position<=d&&(o||null===l||(this._armature._dragonBones.bufferEvent(l),l=null),this._onCrossFrame(this._frameIndex))}null!==l&&this._armature._dragonBones.bufferEvent(l),null!==h&&this._armature._dragonBones.bufferEvent(h)}},e.prototype.setCurrentTime=function(t){this._setCurrentTime(t),this._frameIndex=-1},e}(BaseTimelineState_1.TimelineState);exports.ActionTimelineState=ActionTimelineState;var ZOrderTimelineState=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.ZOrderTimelineState]"},e.prototype._onArriveAtFrame=function(){0<=this.playState&&(0<this._frameArray[this._frameOffset+1]?this._armature._sortZOrder(this._frameArray,this._frameOffset+2):this._armature._sortZOrder(null,0))},e.prototype._onUpdateFrame=function(){},e}(BaseTimelineState_1.TimelineState);exports.ZOrderTimelineState=ZOrderTimelineState;var BoneAllTimelineState=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.toString=function(){return"[class dragonBones.BoneAllTimelineState]"},t.prototype._onArriveAtFrame=function(){r.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._rd[2]=Transform_1.Transform.normalizeRadian(this._rd[2]),this._rd[3]=Transform_1.Transform.normalizeRadian(this._rd[3])),null===this._timelineData&&(this._rd[4]=1,this._rd[5]=1)},t.prototype.init=function(t,e,i){r.prototype.init.call(this,t,e,i),this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=6,this._valueArray=this._animationData.parent.parent.frameFloatArray},t.prototype.fadeOut=function(){this.dirty=!1,this._rd[2]=Transform_1.Transform.normalizeRadian(this._rd[2]),this._rd[3]=Transform_1.Transform.normalizeRadian(this._rd[3])},t.prototype.blend=function(t){var e=this._armature.armatureData.scale,i=this._rd,r=this.target,a=r.target,n=r.blendWeight,s=a.animationPose;1<r.dirty?(s.x+=i[0]*n*e,s.y+=i[1]*n*e,s.rotation+=i[2]*n,s.skew+=i[3]*n,s.scaleX+=(i[4]-1)*n,s.scaleY+=(i[5]-1)*n):(s.x=i[0]*n*e,s.y=i[1]*n*e,s.rotation=i[2]*n,s.skew=i[3]*n,s.scaleX=(i[4]-1)*n+1,s.scaleY=(i[5]-1)*n+1),(t||this.dirty)&&(this.dirty=!1,a._transformDirty=!0)},t}(BaseTimelineState_1.MutilpleValueTimelineState);exports.BoneAllTimelineState=BoneAllTimelineState;var BoneTranslateTimelineState=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.toString=function(){return"[class dragonBones.BoneTranslateTimelineState]"},t.prototype.init=function(t,e,i){r.prototype.init.call(this,t,e,i),this._valueOffset=this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=this._animationData.parent.parent.frameFloatArray},t.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight,a=i.animationPose;1<e.dirty?(a.x+=this._resultA*r,a.y+=this._resultB*r):1!==r?(a.x=this._resultA*r,a.y=this._resultB*r):(a.x=this._resultA,a.y=this._resultB),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},t}(BaseTimelineState_1.DoubleValueTimelineState);exports.BoneTranslateTimelineState=BoneTranslateTimelineState;var BoneRotateTimelineState=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.toString=function(){return"[class dragonBones.BoneRotateTimelineState]"},t.prototype._onArriveAtFrame=function(){r.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._differenceA=Transform_1.Transform.normalizeRadian(this._differenceA),this._differenceB=Transform_1.Transform.normalizeRadian(this._differenceB))},t.prototype.init=function(t,e,i){r.prototype.init.call(this,t,e,i),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},t.prototype.fadeOut=function(){this.dirty=!1,this._resultA=Transform_1.Transform.normalizeRadian(this._resultA),this._resultB=Transform_1.Transform.normalizeRadian(this._resultB)},t.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight,a=i.animationPose;1<e.dirty?(a.rotation+=this._resultA*r,a.skew+=this._resultB*r):1!==r?(a.rotation=this._resultA*r,a.skew=this._resultB*r):(a.rotation=this._resultA,a.skew=this._resultB),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},t}(BaseTimelineState_1.DoubleValueTimelineState);exports.BoneRotateTimelineState=BoneRotateTimelineState;var BoneScaleTimelineState=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.toString=function(){return"[class dragonBones.BoneScaleTimelineState]"},t.prototype._onArriveAtFrame=function(){r.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._resultA=1,this._resultB=1)},t.prototype.init=function(t,e,i){r.prototype.init.call(this,t,e,i),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},t.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight,a=i.animationPose;1<e.dirty?(a.scaleX+=(this._resultA-1)*r,a.scaleY+=(this._resultB-1)*r):1!==r?(a.scaleX=(this._resultA-1)*r+1,a.scaleY=(this._resultB-1)*r+1):(a.scaleX=this._resultA,a.scaleY=this._resultB),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},t}(BaseTimelineState_1.DoubleValueTimelineState);exports.BoneScaleTimelineState=BoneScaleTimelineState;var SurfaceTimelineState=function(s){function t(){return null!==s&&s.apply(this,arguments)||this}return __extends(t,s),t.toString=function(){return"[class dragonBones.SurfaceTimelineState]"},t.prototype._onClear=function(){s.prototype._onClear.call(this),this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},t.prototype.init=function(t,e,i){if(s.prototype.init.call(this,t,e,i),null!==this._timelineData){var r=this._animationData.parent.parent,a=r.frameIntArray,n=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3];this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=a[n+2],this._deformCount=a[n+1],this._deformOffset=a[n+3],this._sameValueOffset=a[n+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=r.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.target.target._deformVertices.length},t.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight,a=i._deformVertices,n=this._valueArray;if(null!==n)for(var s=this._valueCount,o=this._deformOffset,l=this._sameValueOffset,h=this._rd,_=0;_<this._deformCount;++_){var f=0;f=_<o?n[l+_]:_<o+s?h[_-o]:n[l+_-s],1<e.dirty?a[_]+=f*r:a[_]=f*r}else if(1===e.dirty)for(_=0;_<this._deformCount;++_)a[_]=0;(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},t}(BaseTimelineState_1.MutilpleValueTimelineState);exports.SurfaceTimelineState=SurfaceTimelineState;var AlphaTimelineState=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.toString=function(){return"[class dragonBones.AlphaTimelineState]"},t.prototype._onArriveAtFrame=function(){r.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._result=1)},t.prototype.init=function(t,e,i){r.prototype.init.call(this,t,e,i),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},t.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight;1<e.dirty?(i._alpha+=this._result*r,1<i._alpha&&(i._alpha=1)):i._alpha=this._result*r,(t||this.dirty)&&(this.dirty=!1,this._armature._alphaDirty=!0)},t}(BaseTimelineState_1.SingleValueTimelineState);exports.AlphaTimelineState=AlphaTimelineState;var SlotDisplayTimelineState=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.toString=function(){return"[class dragonBones.SlotDisplayTimelineState]"},e.prototype._onArriveAtFrame=function(){if(0<=this.playState){var t=this.target,e=null!==this._timelineData?this._frameArray[this._frameOffset+1]:t._slotData.displayIndex;t.displayIndex!==e&&t._setDisplayIndex(e,!0)}},e.prototype._onUpdateFrame=function(){},e}(BaseTimelineState_1.TimelineState);exports.SlotDisplayTimelineState=SlotDisplayTimelineState;var SlotColorTimelineState=function(s){function t(){var t=null!==s&&s.apply(this,arguments)||this;return t._current=[0,0,0,0,0,0,0,0],t._difference=[0,0,0,0,0,0,0,0],t._result=[0,0,0,0,0,0,0,0],t}return __extends(t,s),t.toString=function(){return"[class dragonBones.SlotColorTimelineState]"},t.prototype._onArriveAtFrame=function(){if(s.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var t=this._animationData.parent.parent,e=t.colorArray,i=t.frameIntArray,r=this._animationData.frameIntOffset+this._frameValueOffset+this._frameIndex,a=i[r];a<0&&(a+=65536),this._isTween?(this._current[0]=e[a++],this._current[1]=e[a++],this._current[2]=e[a++],this._current[3]=e[a++],this._current[4]=e[a++],this._current[5]=e[a++],this._current[6]=e[a++],this._current[7]=e[a++],(a=this._frameIndex===this._frameCount-1?i[this._animationData.frameIntOffset+this._frameValueOffset]:i[r+1])<0&&(a+=65536),this._difference[0]=e[a++]-this._current[0],this._difference[1]=e[a++]-this._current[1],this._difference[2]=e[a++]-this._current[2],this._difference[3]=e[a++]-this._current[3],this._difference[4]=e[a++]-this._current[4],this._difference[5]=e[a++]-this._current[5],this._difference[6]=e[a++]-this._current[6],this._difference[7]=e[a++]-this._current[7]):(this._result[0]=.01*e[a++],this._result[1]=.01*e[a++],this._result[2]=.01*e[a++],this._result[3]=.01*e[a++],this._result[4]=e[a++],this._result[5]=e[a++],this._result[6]=e[a++],this._result[7]=e[a++])}else{var n=this.target.slotData.color;this._result[0]=n.alphaMultiplier,this._result[1]=n.redMultiplier,this._result[2]=n.greenMultiplier,this._result[3]=n.blueMultiplier,this._result[4]=n.alphaOffset,this._result[5]=n.redOffset,this._result[6]=n.greenOffset,this._result[7]=n.blueOffset}},t.prototype._onUpdateFrame=function(){s.prototype._onUpdateFrame.call(this),this._isTween&&(this._result[0]=.01*(this._current[0]+this._difference[0]*this._tweenProgress),this._result[1]=.01*(this._current[1]+this._difference[1]*this._tweenProgress),this._result[2]=.01*(this._current[2]+this._difference[2]*this._tweenProgress),this._result[3]=.01*(this._current[3]+this._difference[3]*this._tweenProgress),this._result[4]=this._current[4]+this._difference[4]*this._tweenProgress,this._result[5]=this._current[5]+this._difference[5]*this._tweenProgress,this._result[6]=this._current[6]+this._difference[6]*this._tweenProgress,this._result[7]=this._current[7]+this._difference[7]*this._tweenProgress)},t.prototype.fadeOut=function(){this._isTween=!1},t.prototype.update=function(t){if(s.prototype.update.call(this,t),this._isTween||this.dirty){var e=this.target,i=e._colorTransform;if(0!==this._animationState._fadeState||0!==this._animationState._subFadeState){if(i.alphaMultiplier!==this._result[0]||i.redMultiplier!==this._result[1]||i.greenMultiplier!==this._result[2]||i.blueMultiplier!==this._result[3]||i.alphaOffset!==this._result[4]||i.redOffset!==this._result[5]||i.greenOffset!==this._result[6]||i.blueOffset!==this._result[7]){var r=Math.pow(this._animationState._fadeProgress,4);i.alphaMultiplier+=(this._result[0]-i.alphaMultiplier)*r,i.redMultiplier+=(this._result[1]-i.redMultiplier)*r,i.greenMultiplier+=(this._result[2]-i.greenMultiplier)*r,i.blueMultiplier+=(this._result[3]-i.blueMultiplier)*r,i.alphaOffset+=(this._result[4]-i.alphaOffset)*r,i.redOffset+=(this._result[5]-i.redOffset)*r,i.greenOffset+=(this._result[6]-i.greenOffset)*r,i.blueOffset+=(this._result[7]-i.blueOffset)*r,e._colorDirty=!0}}else this.dirty&&(this.dirty=!1,i.alphaMultiplier===this._result[0]&&i.redMultiplier===this._result[1]&&i.greenMultiplier===this._result[2]&&i.blueMultiplier===this._result[3]&&i.alphaOffset===this._result[4]&&i.redOffset===this._result[5]&&i.greenOffset===this._result[6]&&i.blueOffset===this._result[7]||(i.alphaMultiplier=this._result[0],i.redMultiplier=this._result[1],i.greenMultiplier=this._result[2],i.blueMultiplier=this._result[3],i.alphaOffset=this._result[4],i.redOffset=this._result[5],i.greenOffset=this._result[6],i.blueOffset=this._result[7],e._colorDirty=!0))}},t}(BaseTimelineState_1.TweenTimelineState);exports.SlotColorTimelineState=SlotColorTimelineState;var SlotZIndexTimelineState=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.toString=function(){return"[class dragonBones.SlotZIndexTimelineState]"},t.prototype._onArriveAtFrame=function(){if(r.prototype._onArriveAtFrame.call(this),null===this._timelineData){var t=this.target.target;this._result=t.slotData.zIndex}},t.prototype.init=function(t,e,i){r.prototype.init.call(this,t,e,i),this._valueOffset=this._animationData.frameIntOffset,this._valueArray=this._animationData.parent.parent.frameIntArray},t.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight;1<e.dirty?i._zIndex+=this._result*r:i._zIndex=this._result*r,(t||this.dirty)&&(this.dirty=!1,this._armature._zIndexDirty=!0)},t}(BaseTimelineState_1.SingleValueTimelineState);exports.SlotZIndexTimelineState=SlotZIndexTimelineState;var DeformTimelineState=function(f){function t(){return null!==f&&f.apply(this,arguments)||this}return __extends(t,f),t.toString=function(){return"[class dragonBones.DeformTimelineState]"},t.prototype._onClear=function(){f.prototype._onClear.call(this),this.geometryOffset=0,this.displayFrame=null,this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},t.prototype.init=function(t,e,i){if(f.prototype.init.call(this,t,e,i),null!==this._timelineData){var r=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3],a=this._animationData.parent.parent,n=a.frameIntArray,s=this.target.target;this.geometryOffset=n[r+0],this.geometryOffset<0&&(this.geometryOffset+=65536);for(var o=0,l=s.displayFrameCount;o<l;++o){var h=s.getDisplayFrameAt(o),_=h.getGeometryData();if(null!==_&&_.offset===this.geometryOffset){this.displayFrame=h,this.displayFrame.updateDeformVertices();break}}if(null===this.displayFrame)return void this.returnToPool();this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=n[r+2],this._deformCount=n[r+1],this._deformOffset=n[r+3],this._sameValueOffset=n[r+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=a.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.displayFrame.deformVertices.length},t.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight,a=this.displayFrame.deformVertices,n=this._valueArray;if(null!==n)for(var s=this._valueCount,o=this._deformOffset,l=this._sameValueOffset,h=this._rd,_=0;_<this._deformCount;++_){var f=0;f=_<o?n[l+_]:_<o+s?h[_-o]:n[l+_-s],1<e.dirty?a[_]+=f*r:a[_]=f*r}else if(1===e.dirty)for(_=0;_<this._deformCount;++_)a[_]=0;(t||this.dirty)&&(this.dirty=!1,i._geometryData===this.displayFrame.getGeometryData()&&(i._verticesDirty=!0))},t}(BaseTimelineState_1.MutilpleValueTimelineState);exports.DeformTimelineState=DeformTimelineState;var IKConstraintTimelineState=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.toString=function(){return"[class dragonBones.IKConstraintTimelineState]"},t.prototype._onUpdateFrame=function(){r.prototype._onUpdateFrame.call(this);var t=this.target;if(null!==this._timelineData)t._bendPositive=0<this._currentA,t._weight=this._currentB;else{var e=t._constraintData;t._bendPositive=e.bendPositive,t._weight=e.weight}t.invalidUpdate(),this.dirty=!1},t.prototype.init=function(t,e,i){r.prototype.init.call(this,t,e,i),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},t}(BaseTimelineState_1.DoubleValueTimelineState);exports.IKConstraintTimelineState=IKConstraintTimelineState;var AnimationProgressTimelineState=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.toString=function(){return"[class dragonBones.AnimationProgressTimelineState]"},t.prototype._onUpdateFrame=function(){r.prototype._onUpdateFrame.call(this);var t=this.target;null!==t._parent&&(t.currentTime=this._result*t.totalTime),this.dirty=!1},t.prototype.init=function(t,e,i){r.prototype.init.call(this,t,e,i),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},t}(BaseTimelineState_1.SingleValueTimelineState);exports.AnimationProgressTimelineState=AnimationProgressTimelineState;var AnimationWeightTimelineState=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.toString=function(){return"[class dragonBones.AnimationWeightTimelineState]"},t.prototype._onUpdateFrame=function(){r.prototype._onUpdateFrame.call(this);var t=this.target;null!==t._parent&&(t.weight=this._result),this.dirty=!1},t.prototype.init=function(t,e,i){r.prototype.init.call(this,t,e,i),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},t}(BaseTimelineState_1.SingleValueTimelineState);exports.AnimationWeightTimelineState=AnimationWeightTimelineState;var AnimationParametersTimelineState=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return __extends(t,r),t.toString=function(){return"[class dragonBones.AnimationParametersTimelineState]"},t.prototype._onUpdateFrame=function(){r.prototype._onUpdateFrame.call(this);var t=this.target;null!==t._parent&&(t.parameterX=this._resultA,t.parameterY=this._resultB),this.dirty=!1},t.prototype.init=function(t,e,i){r.prototype.init.call(this,t,e,i),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},t}(BaseTimelineState_1.DoubleValueTimelineState);exports.AnimationParametersTimelineState=AnimationParametersTimelineState;